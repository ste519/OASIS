{"ast":null,"code":"import _slicedToArray from\"/Users/ste./Documents/Codes/OASIS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/Users/ste./Documents/Codes/OASIS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ste./Documents/Codes/OASIS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ste./Documents/Codes/OASIS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ste./Documents/Codes/OASIS/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import mapboxgl from'mapbox-gl';import chroma from'chroma-js';mapboxgl.accessToken='pk.eyJ1Ijoic3RlNTE5IiwiYSI6ImNrOHc1aHlvYTB0N2ozam51MHFiazE3bmcifQ.AHtFuA-pAqau_AJIy-hzOg';// let dark = false;\nvar Application=/*#__PURE__*/function(_React$PureComponent){_inherits(Application,_React$PureComponent);var _super=_createSuper(Application);function Application(props){var _this;_classCallCheck(this,Application);_this=_super.call(this,props);_this.state={lng:-99.9,lat:40.5,zoom:3.7,dark:window.location.pathname!==\"/\"&&window.location.pathname!==\"/dashboard\"};return _this;}_createClass(Application,[{key:\"componentDidMount\",value:function componentDidMount(){// dark = window.location.pathname!==\"/\" && window.location.pathname!==\"/dashboard\"\n// console.log(dark)\nvar map=new mapboxgl.Map({container:'map',style:'mapbox://styles/mapbox/dark-v10',center:[this.state.lng,this.state.lat],zoom:this.state.zoom});var stateToFIPS={\"AK\":\"02\",\"AL\":\"01\",\"AR\":\"05\",\"AS\":\"60\",\"AZ\":\"04\",\"CA\":\"06\",\"CO\":\"08\",\"CT\":\"09\",\"DC\":\"11\",\"DE\":\"10\",\"FL\":\"12\",\"GA\":\"13\",\"GU\":\"66\",\"HI\":\"15\",\"IA\":\"19\",\"ID\":\"16\",\"IL\":\"17\",\"IN\":\"18\",\"KS\":\"20\",\"KY\":\"21\",\"LA\":\"22\",\"MA\":\"25\",\"MD\":\"24\",\"ME\":\"23\",\"MI\":\"26\",\"MN\":\"27\",\"MO\":\"29\",\"MS\":\"28\",\"MT\":\"30\",\"NC\":\"37\",\"ND\":\"38\",\"NE\":\"31\",\"NH\":\"33\",\"NJ\":\"34\",\"NM\":\"35\",\"NV\":\"32\",\"NY\":\"36\",\"OH\":\"39\",\"OK\":\"40\",\"OR\":\"41\",\"PA\":\"42\",\"PR\":\"72\",\"RI\":\"44\",\"SC\":\"45\",\"SD\":\"46\",\"TN\":\"47\",\"TX\":\"48\",\"UT\":\"49\",\"VA\":\"51\",\"VI\":\"78\",\"VT\":\"50\",\"WA\":\"53\",\"WI\":\"55\",\"WV\":\"54\",\"WY\":\"56\"};var data={};var url=\"https://covidtracking.com/api/states\";fetch(url).then(function(resp){return resp.json();}).then(function(dat){data=dat;// console.log(dat);\n}).catch(function(error){console.log(error);});map.on('load',function(){// Add source for state polygons hosted on Mapbox, based on US Census Data:\n// https://www.census.gov/geo/maps-data/data/cbf/cbf_state.html\nmap.addSource('states',{type:'vector',url:'mapbox://mapbox.us_census_states_2015'});// exclude states outside the 50 states\nvar expression=['match',['get','STATE_ID']];// var maxValue= data.reduce((max,b) => Math.max(max, b.death), data[0].death);\nvar normalizerValue=5000;data.forEach(function(row){var stateID=row.state;if(stateID in stateToFIPS){var red=row.death/normalizerValue*255;var color='rgba('+red+', '+0+', '+0+', 1)';expression.push(stateToFIPS[stateID],color);}});// Last value is the default, used where there is no data\nexpression.push('rgba(0,0,0,0)');var zoomThreshold=4;// Add layer from the vector tile source with data-driven style\nmap.addLayer({'id':'states-join','type':'fill','source':'states','maxzoom':zoomThreshold,'source-layer':'states','paint':{'fill-color':expression}},'waterway-label');/*----------------------------  County Level Data ----------------------------------*/ // var countyData ={}\n// var url =\"http://13.57.220.143/getcounty\";\n// fetch(url,{ method: 'post'}).then((resp) => resp.json())\n//   .then(function(data) {\n//     countyData=data;\n//     console.log(data);\n//   })\n//   .catch(function(error) {\n//     console.log(error);\n//   });\n// TODO: I need help making this URL fetch work\nvar countyData=[{\"deaths\":69,\"county\":\"Alameda\",\"state\":\"California\",\"fips\":\"06001\",\"date\":\"2020-05-06\",\"cases\":1884},{\"deaths\":0,\"county\":\"Alpine\",\"state\":\"California\",\"fips\":\"06003\",\"date\":\"2020-05-06\",\"cases\":2},{\"deaths\":0,\"county\":\"Amador\",\"state\":\"California\",\"fips\":\"06005\",\"date\":\"2020-05-06\",\"cases\":7},{\"deaths\":0,\"county\":\"Butte\",\"state\":\"California\",\"fips\":\"06007\",\"date\":\"2020-05-06\",\"cases\":19},{\"deaths\":0,\"county\":\"Calaveras\",\"state\":\"California\",\"fips\":\"06009\",\"date\":\"2020-05-06\",\"cases\":13},{\"deaths\":0,\"county\":\"Colusa\",\"state\":\"California\",\"fips\":\"06011\",\"date\":\"2020-05-06\",\"cases\":3},{\"deaths\":29,\"county\":\"Contra Costa\",\"state\":\"California\",\"fips\":\"06013\",\"date\":\"2020-05-06\",\"cases\":985},{\"deaths\":0,\"county\":\"Del Norte\",\"state\":\"California\",\"fips\":\"06015\",\"date\":\"2020-05-06\",\"cases\":3},{\"deaths\":0,\"county\":\"El Dorado\",\"state\":\"California\",\"fips\":\"06017\",\"date\":\"2020-05-06\",\"cases\":54},{\"deaths\":9,\"county\":\"Fresno\",\"state\":\"California\",\"fips\":\"06019\",\"date\":\"2020-05-06\",\"cases\":777},{\"deaths\":0,\"county\":\"Glenn\",\"state\":\"California\",\"fips\":\"06021\",\"date\":\"2020-05-06\",\"cases\":5},{\"deaths\":0,\"county\":\"Humboldt\",\"state\":\"California\",\"fips\":\"06023\",\"date\":\"2020-05-06\",\"cases\":55},{\"deaths\":8,\"county\":\"Imperial\",\"state\":\"California\",\"fips\":\"06025\",\"date\":\"2020-05-06\",\"cases\":419},{\"deaths\":1,\"county\":\"Inyo\",\"state\":\"California\",\"fips\":\"06027\",\"date\":\"2020-05-06\",\"cases\":20},{\"deaths\":11,\"county\":\"Kern\",\"state\":\"California\",\"fips\":\"06029\",\"date\":\"2020-05-06\",\"cases\":1084},{\"deaths\":1,\"county\":\"Kings\",\"state\":\"California\",\"fips\":\"06031\",\"date\":\"2020-05-06\",\"cases\":233},{\"deaths\":0,\"county\":\"Lake\",\"state\":\"California\",\"fips\":\"06033\",\"date\":\"2020-05-06\",\"cases\":8},{\"deaths\":1367,\"county\":\"Los Angeles\",\"state\":\"California\",\"fips\":\"06037\",\"date\":\"2020-05-06\",\"cases\":28644},{\"deaths\":2,\"county\":\"Madera\",\"state\":\"California\",\"fips\":\"06039\",\"date\":\"2020-05-06\",\"cases\":55},{\"deaths\":14,\"county\":\"Marin\",\"state\":\"California\",\"fips\":\"06041\",\"date\":\"2020-05-06\",\"cases\":244},{\"deaths\":0,\"county\":\"Mariposa\",\"state\":\"California\",\"fips\":\"06043\",\"date\":\"2020-05-06\",\"cases\":15},{\"deaths\":0,\"county\":\"Mendocino\",\"state\":\"California\",\"fips\":\"06045\",\"date\":\"2020-05-06\",\"cases\":40},{\"deaths\":3,\"county\":\"Merced\",\"state\":\"California\",\"fips\":\"06047\",\"date\":\"2020-05-06\",\"cases\":152},{\"deaths\":1,\"county\":\"Mono\",\"state\":\"California\",\"fips\":\"06051\",\"date\":\"2020-05-06\",\"cases\":27},{\"deaths\":6,\"county\":\"Monterey\",\"state\":\"California\",\"fips\":\"06053\",\"date\":\"2020-05-06\",\"cases\":240},{\"deaths\":2,\"county\":\"Napa\",\"state\":\"California\",\"fips\":\"06055\",\"date\":\"2020-05-06\",\"cases\":79},{\"deaths\":1,\"county\":\"Nevada\",\"state\":\"California\",\"fips\":\"06057\",\"date\":\"2020-05-06\",\"cases\":41},{\"deaths\":65,\"county\":\"Orange\",\"state\":\"California\",\"fips\":\"06059\",\"date\":\"2020-05-06\",\"cases\":3041},{\"deaths\":8,\"county\":\"Placer\",\"state\":\"California\",\"fips\":\"06061\",\"date\":\"2020-05-06\",\"cases\":163},{\"deaths\":0,\"county\":\"Plumas\",\"state\":\"California\",\"fips\":\"06063\",\"date\":\"2020-05-06\",\"cases\":4},{\"deaths\":190,\"county\":\"Riverside\",\"state\":\"California\",\"fips\":\"06065\",\"date\":\"2020-05-06\",\"cases\":4672},{\"deaths\":47,\"county\":\"Sacramento\",\"state\":\"California\",\"fips\":\"06067\",\"date\":\"2020-05-06\",\"cases\":1132},{\"deaths\":2,\"county\":\"San Benito\",\"state\":\"California\",\"fips\":\"06069\",\"date\":\"2020-05-06\",\"cases\":53},{\"deaths\":104,\"county\":\"San Bernardino\",\"state\":\"California\",\"fips\":\"06071\",\"date\":\"2020-05-06\",\"cases\":2432},{\"deaths\":173,\"county\":\"San Diego\",\"state\":\"California\",\"fips\":\"06073\",\"date\":\"2020-05-06\",\"cases\":4382},{\"deaths\":31,\"county\":\"San Francisco\",\"state\":\"California\",\"fips\":\"06075\",\"date\":\"2020-05-06\",\"cases\":1779},{\"deaths\":27,\"county\":\"San Joaquin\",\"state\":\"California\",\"fips\":\"06077\",\"date\":\"2020-05-06\",\"cases\":579},{\"deaths\":1,\"county\":\"San Luis Obispo\",\"state\":\"California\",\"fips\":\"06079\",\"date\":\"2020-05-06\",\"cases\":208},{\"deaths\":56,\"county\":\"San Mateo\",\"state\":\"California\",\"fips\":\"06081\",\"date\":\"2020-05-06\",\"cases\":1341},{\"deaths\":10,\"county\":\"Santa Barbara\",\"state\":\"California\",\"fips\":\"06083\",\"date\":\"2020-05-06\",\"cases\":613},{\"deaths\":122,\"county\":\"Santa Clara\",\"state\":\"California\",\"fips\":\"06085\",\"date\":\"2020-05-06\",\"cases\":2268},{\"deaths\":2,\"county\":\"Santa Cruz\",\"state\":\"California\",\"fips\":\"06087\",\"date\":\"2020-05-06\",\"cases\":138},{\"deaths\":4,\"county\":\"Shasta\",\"state\":\"California\",\"fips\":\"06089\",\"date\":\"2020-05-06\",\"cases\":31},{\"deaths\":0,\"county\":\"Siskiyou\",\"state\":\"California\",\"fips\":\"06093\",\"date\":\"2020-05-06\",\"cases\":5},{\"deaths\":7,\"county\":\"Solano\",\"state\":\"California\",\"fips\":\"06095\",\"date\":\"2020-05-06\",\"cases\":342},{\"deaths\":4,\"county\":\"Sonoma\",\"state\":\"California\",\"fips\":\"06097\",\"date\":\"2020-05-06\",\"cases\":286},{\"deaths\":17,\"county\":\"Stanislaus\",\"state\":\"California\",\"fips\":\"06099\",\"date\":\"2020-05-06\",\"cases\":461},{\"deaths\":2,\"county\":\"Sutter\",\"state\":\"California\",\"fips\":\"06101\",\"date\":\"2020-05-06\",\"cases\":31},{\"deaths\":1,\"county\":\"Tehama\",\"state\":\"California\",\"fips\":\"06103\",\"date\":\"2020-05-06\",\"cases\":1},{\"deaths\":41,\"county\":\"Tulare\",\"state\":\"California\",\"fips\":\"06107\",\"date\":\"2020-05-06\",\"cases\":916},{\"deaths\":0,\"county\":\"Tuolumne\",\"state\":\"California\",\"fips\":\"06109\",\"date\":\"2020-05-06\",\"cases\":2},{\"deaths\":19,\"county\":\"Ventura\",\"state\":\"California\",\"fips\":\"06111\",\"date\":\"2020-05-06\",\"cases\":608},{\"deaths\":20,\"county\":\"Yolo\",\"state\":\"California\",\"fips\":\"06113\",\"date\":\"2020-05-06\",\"cases\":172},{\"deaths\":1,\"county\":\"Yuba\",\"state\":\"California\",\"fips\":\"06115\",\"date\":\"2020-05-06\",\"cases\":19}];var values=countyData.map(function(county){return county.deaths;});//get all the death data points\nvar colorScale=chroma.scale(['black','red']).padding(0.15).domain(values,\"q\",5);function getColor(val){return colorScale(val).hex();}var colors={};countyData.forEach(function(county){var GEOID=county.fips;var value=county.deaths;var color=getColor(value);if(!colors[color]){colors[color]=[];}colors[color].push(GEOID);});var colorExpression=[\"match\",[\"get\",\"GEOID\"]];var colorQuantiles=Object.entries(colors).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),color=_ref2[0],GEOIDs=_ref2[1];colorExpression.push(GEOIDs,color);});colorExpression.push(\"rgba(0,0,0,0)\");map.addLayer({id:\"counties\",type:\"fill\",minzoom:zoomThreshold,source:{type:\"vector\",tiles:[\"https://gis-server.data.census.gov/arcgis/rest/services/Hosted/VT_2017_050_00_PY_D1/VectorTileServer/tile/{z}/{y}/{x}.pbf\"]},\"source-layer\":\"County\",paint:{\"fill-opacity\":0.6,\"fill-color\":colorExpression}});});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"dark mask\"}),/*#__PURE__*/React.createElement(\"div\",{id:\"map\"}));}}]);return Application;}(React.PureComponent);export{Application as default};","map":{"version":3,"sources":["/Users/ste./Documents/Codes/OASIS/src/elements/Map.js"],"names":["React","mapboxgl","chroma","accessToken","Application","props","state","lng","lat","zoom","dark","window","location","pathname","map","Map","container","style","center","stateToFIPS","data","url","fetch","then","resp","json","dat","catch","error","console","log","on","addSource","type","expression","normalizerValue","forEach","row","stateID","red","death","color","push","zoomThreshold","addLayer","countyData","values","county","deaths","colorScale","scale","padding","domain","getColor","val","hex","colors","GEOID","fips","value","colorExpression","colorQuantiles","Object","entries","GEOIDs","id","minzoom","source","tiles","paint","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport chroma from 'chroma-js';\n\nmapboxgl.accessToken = 'pk.eyJ1Ijoic3RlNTE5IiwiYSI6ImNrOHc1aHlvYTB0N2ozam51MHFiazE3bmcifQ.AHtFuA-pAqau_AJIy-hzOg';\n// let dark = false;\n\nexport default class Application extends React.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            lng: -99.9,\n            lat: 40.5,\n            zoom: 3.7,\n            dark:window.location.pathname!==\"/\" && window.location.pathname!==\"/dashboard\"\n        };\n        \n    }\n    \n    componentDidMount() {\n      \n        // dark = window.location.pathname!==\"/\" && window.location.pathname!==\"/dashboard\"\n        // console.log(dark)\n\n        var map = new mapboxgl.Map({\n            container: 'map',\n            style: 'mapbox://styles/mapbox/dark-v10',\n            center: [this.state.lng, this.state.lat],\n            zoom: this.state.zoom\n        });\n\n        var stateToFIPS = {\n            \"AK\": \"02\",\n            \"AL\": \"01\",\n            \"AR\": \"05\",\n            \"AS\": \"60\",\n            \"AZ\": \"04\",\n            \"CA\": \"06\",\n            \"CO\": \"08\",\n            \"CT\": \"09\",\n            \"DC\": \"11\",\n            \"DE\": \"10\",\n            \"FL\": \"12\",\n            \"GA\": \"13\",\n            \"GU\": \"66\",\n            \"HI\": \"15\",\n            \"IA\": \"19\",\n            \"ID\": \"16\",\n            \"IL\": \"17\",\n            \"IN\": \"18\",\n            \"KS\": \"20\",\n            \"KY\": \"21\",\n            \"LA\": \"22\",\n            \"MA\": \"25\",\n            \"MD\": \"24\",\n            \"ME\": \"23\",\n            \"MI\": \"26\",\n            \"MN\": \"27\",\n            \"MO\": \"29\",\n            \"MS\": \"28\",\n            \"MT\": \"30\",\n            \"NC\": \"37\",\n            \"ND\": \"38\",\n            \"NE\": \"31\",\n            \"NH\": \"33\",\n            \"NJ\": \"34\",\n            \"NM\": \"35\",\n            \"NV\": \"32\",\n            \"NY\": \"36\",\n            \"OH\": \"39\",\n            \"OK\": \"40\",\n            \"OR\": \"41\",\n            \"PA\": \"42\",\n            \"PR\": \"72\",\n            \"RI\": \"44\",\n            \"SC\": \"45\",\n            \"SD\": \"46\",\n            \"TN\": \"47\",\n            \"TX\": \"48\",\n            \"UT\": \"49\",\n            \"VA\": \"51\",\n            \"VI\": \"78\",\n            \"VT\": \"50\",\n            \"WA\": \"53\",\n            \"WI\": \"55\",\n            \"WV\": \"54\",\n            \"WY\": \"56\"\n        }\n\n        var data = {}\n        var url = \"https://covidtracking.com/api/states\";\n        fetch(url).then((resp) => resp.json())\n            .then(function (dat) {\n                data = dat;\n                // console.log(dat);\n            })\n            .catch(function (error) {\n                console.log(error);\n            });\n\n\n        map.on('load', function () {\n            // Add source for state polygons hosted on Mapbox, based on US Census Data:\n            // https://www.census.gov/geo/maps-data/data/cbf/cbf_state.html\n            map.addSource('states', {\n                type: 'vector',\n                url: 'mapbox://mapbox.us_census_states_2015'\n            });\n\n\n            // exclude states outside the 50 states\n            var expression = ['match', ['get', 'STATE_ID']];\n            // var maxValue= data.reduce((max,b) => Math.max(max, b.death), data[0].death);\n            var normalizerValue = 5000;\n            data.forEach(function (row) {\n                var stateID = row.state;\n                if (stateID in stateToFIPS) {\n                    var red = (row.death / normalizerValue) * 255;\n                    var color = 'rgba(' + red + ', ' + 0 + ', ' + 0 + ', 1)';\n                    expression.push(stateToFIPS[stateID], color);\n                }\n            });\n\n\n            // Last value is the default, used where there is no data\n            expression.push('rgba(0,0,0,0)');\n\n            var zoomThreshold = 4;\n            // Add layer from the vector tile source with data-driven style\n            map.addLayer(\n                {\n                    'id': 'states-join',\n                    'type': 'fill',\n                    'source': 'states',\n                    'maxzoom': zoomThreshold,\n                    'source-layer': 'states',\n                    'paint': {\n                        'fill-color': expression\n                    }\n                },\n                'waterway-label'\n            );\n\n            /*----------------------------  County Level Data ----------------------------------*/\n\n            // var countyData ={}\n            // var url =\"http://13.57.220.143/getcounty\";\n            // fetch(url,{ method: 'post'}).then((resp) => resp.json())\n            //   .then(function(data) {\n            //     countyData=data;\n            //     console.log(data);\n            //   })\n            //   .catch(function(error) {\n            //     console.log(error);\n            //   });\n            // TODO: I need help making this URL fetch work\n\n            const countyData = [{ \"deaths\": 69, \"county\": \"Alameda\", \"state\": \"California\", \"fips\": \"06001\", \"date\": \"2020-05-06\", \"cases\": 1884 }, { \"deaths\": 0, \"county\": \"Alpine\", \"state\": \"California\", \"fips\": \"06003\", \"date\": \"2020-05-06\", \"cases\": 2 }, { \"deaths\": 0, \"county\": \"Amador\", \"state\": \"California\", \"fips\": \"06005\", \"date\": \"2020-05-06\", \"cases\": 7 }, { \"deaths\": 0, \"county\": \"Butte\", \"state\": \"California\", \"fips\": \"06007\", \"date\": \"2020-05-06\", \"cases\": 19 }, { \"deaths\": 0, \"county\": \"Calaveras\", \"state\": \"California\", \"fips\": \"06009\", \"date\": \"2020-05-06\", \"cases\": 13 }, { \"deaths\": 0, \"county\": \"Colusa\", \"state\": \"California\", \"fips\": \"06011\", \"date\": \"2020-05-06\", \"cases\": 3 }, { \"deaths\": 29, \"county\": \"Contra Costa\", \"state\": \"California\", \"fips\": \"06013\", \"date\": \"2020-05-06\", \"cases\": 985 }, { \"deaths\": 0, \"county\": \"Del Norte\", \"state\": \"California\", \"fips\": \"06015\", \"date\": \"2020-05-06\", \"cases\": 3 }, { \"deaths\": 0, \"county\": \"El Dorado\", \"state\": \"California\", \"fips\": \"06017\", \"date\": \"2020-05-06\", \"cases\": 54 }, { \"deaths\": 9, \"county\": \"Fresno\", \"state\": \"California\", \"fips\": \"06019\", \"date\": \"2020-05-06\", \"cases\": 777 }, { \"deaths\": 0, \"county\": \"Glenn\", \"state\": \"California\", \"fips\": \"06021\", \"date\": \"2020-05-06\", \"cases\": 5 }, { \"deaths\": 0, \"county\": \"Humboldt\", \"state\": \"California\", \"fips\": \"06023\", \"date\": \"2020-05-06\", \"cases\": 55 }, { \"deaths\": 8, \"county\": \"Imperial\", \"state\": \"California\", \"fips\": \"06025\", \"date\": \"2020-05-06\", \"cases\": 419 }, { \"deaths\": 1, \"county\": \"Inyo\", \"state\": \"California\", \"fips\": \"06027\", \"date\": \"2020-05-06\", \"cases\": 20 }, { \"deaths\": 11, \"county\": \"Kern\", \"state\": \"California\", \"fips\": \"06029\", \"date\": \"2020-05-06\", \"cases\": 1084 }, { \"deaths\": 1, \"county\": \"Kings\", \"state\": \"California\", \"fips\": \"06031\", \"date\": \"2020-05-06\", \"cases\": 233 }, { \"deaths\": 0, \"county\": \"Lake\", \"state\": \"California\", \"fips\": \"06033\", \"date\": \"2020-05-06\", \"cases\": 8 }, { \"deaths\": 1367, \"county\": \"Los Angeles\", \"state\": \"California\", \"fips\": \"06037\", \"date\": \"2020-05-06\", \"cases\": 28644 }, { \"deaths\": 2, \"county\": \"Madera\", \"state\": \"California\", \"fips\": \"06039\", \"date\": \"2020-05-06\", \"cases\": 55 }, { \"deaths\": 14, \"county\": \"Marin\", \"state\": \"California\", \"fips\": \"06041\", \"date\": \"2020-05-06\", \"cases\": 244 }, { \"deaths\": 0, \"county\": \"Mariposa\", \"state\": \"California\", \"fips\": \"06043\", \"date\": \"2020-05-06\", \"cases\": 15 }, { \"deaths\": 0, \"county\": \"Mendocino\", \"state\": \"California\", \"fips\": \"06045\", \"date\": \"2020-05-06\", \"cases\": 40 }, { \"deaths\": 3, \"county\": \"Merced\", \"state\": \"California\", \"fips\": \"06047\", \"date\": \"2020-05-06\", \"cases\": 152 }, { \"deaths\": 1, \"county\": \"Mono\", \"state\": \"California\", \"fips\": \"06051\", \"date\": \"2020-05-06\", \"cases\": 27 }, { \"deaths\": 6, \"county\": \"Monterey\", \"state\": \"California\", \"fips\": \"06053\", \"date\": \"2020-05-06\", \"cases\": 240 }, { \"deaths\": 2, \"county\": \"Napa\", \"state\": \"California\", \"fips\": \"06055\", \"date\": \"2020-05-06\", \"cases\": 79 }, { \"deaths\": 1, \"county\": \"Nevada\", \"state\": \"California\", \"fips\": \"06057\", \"date\": \"2020-05-06\", \"cases\": 41 }, { \"deaths\": 65, \"county\": \"Orange\", \"state\": \"California\", \"fips\": \"06059\", \"date\": \"2020-05-06\", \"cases\": 3041 }, { \"deaths\": 8, \"county\": \"Placer\", \"state\": \"California\", \"fips\": \"06061\", \"date\": \"2020-05-06\", \"cases\": 163 }, { \"deaths\": 0, \"county\": \"Plumas\", \"state\": \"California\", \"fips\": \"06063\", \"date\": \"2020-05-06\", \"cases\": 4 }, { \"deaths\": 190, \"county\": \"Riverside\", \"state\": \"California\", \"fips\": \"06065\", \"date\": \"2020-05-06\", \"cases\": 4672 }, { \"deaths\": 47, \"county\": \"Sacramento\", \"state\": \"California\", \"fips\": \"06067\", \"date\": \"2020-05-06\", \"cases\": 1132 }, { \"deaths\": 2, \"county\": \"San Benito\", \"state\": \"California\", \"fips\": \"06069\", \"date\": \"2020-05-06\", \"cases\": 53 }, { \"deaths\": 104, \"county\": \"San Bernardino\", \"state\": \"California\", \"fips\": \"06071\", \"date\": \"2020-05-06\", \"cases\": 2432 }, { \"deaths\": 173, \"county\": \"San Diego\", \"state\": \"California\", \"fips\": \"06073\", \"date\": \"2020-05-06\", \"cases\": 4382 }, { \"deaths\": 31, \"county\": \"San Francisco\", \"state\": \"California\", \"fips\": \"06075\", \"date\": \"2020-05-06\", \"cases\": 1779 }, { \"deaths\": 27, \"county\": \"San Joaquin\", \"state\": \"California\", \"fips\": \"06077\", \"date\": \"2020-05-06\", \"cases\": 579 }, { \"deaths\": 1, \"county\": \"San Luis Obispo\", \"state\": \"California\", \"fips\": \"06079\", \"date\": \"2020-05-06\", \"cases\": 208 }, { \"deaths\": 56, \"county\": \"San Mateo\", \"state\": \"California\", \"fips\": \"06081\", \"date\": \"2020-05-06\", \"cases\": 1341 }, { \"deaths\": 10, \"county\": \"Santa Barbara\", \"state\": \"California\", \"fips\": \"06083\", \"date\": \"2020-05-06\", \"cases\": 613 }, { \"deaths\": 122, \"county\": \"Santa Clara\", \"state\": \"California\", \"fips\": \"06085\", \"date\": \"2020-05-06\", \"cases\": 2268 }, { \"deaths\": 2, \"county\": \"Santa Cruz\", \"state\": \"California\", \"fips\": \"06087\", \"date\": \"2020-05-06\", \"cases\": 138 }, { \"deaths\": 4, \"county\": \"Shasta\", \"state\": \"California\", \"fips\": \"06089\", \"date\": \"2020-05-06\", \"cases\": 31 }, { \"deaths\": 0, \"county\": \"Siskiyou\", \"state\": \"California\", \"fips\": \"06093\", \"date\": \"2020-05-06\", \"cases\": 5 }, { \"deaths\": 7, \"county\": \"Solano\", \"state\": \"California\", \"fips\": \"06095\", \"date\": \"2020-05-06\", \"cases\": 342 }, { \"deaths\": 4, \"county\": \"Sonoma\", \"state\": \"California\", \"fips\": \"06097\", \"date\": \"2020-05-06\", \"cases\": 286 }, { \"deaths\": 17, \"county\": \"Stanislaus\", \"state\": \"California\", \"fips\": \"06099\", \"date\": \"2020-05-06\", \"cases\": 461 }, { \"deaths\": 2, \"county\": \"Sutter\", \"state\": \"California\", \"fips\": \"06101\", \"date\": \"2020-05-06\", \"cases\": 31 }, { \"deaths\": 1, \"county\": \"Tehama\", \"state\": \"California\", \"fips\": \"06103\", \"date\": \"2020-05-06\", \"cases\": 1 }, { \"deaths\": 41, \"county\": \"Tulare\", \"state\": \"California\", \"fips\": \"06107\", \"date\": \"2020-05-06\", \"cases\": 916 }, { \"deaths\": 0, \"county\": \"Tuolumne\", \"state\": \"California\", \"fips\": \"06109\", \"date\": \"2020-05-06\", \"cases\": 2 }, { \"deaths\": 19, \"county\": \"Ventura\", \"state\": \"California\", \"fips\": \"06111\", \"date\": \"2020-05-06\", \"cases\": 608 }, { \"deaths\": 20, \"county\": \"Yolo\", \"state\": \"California\", \"fips\": \"06113\", \"date\": \"2020-05-06\", \"cases\": 172 }, { \"deaths\": 1, \"county\": \"Yuba\", \"state\": \"California\", \"fips\": \"06115\", \"date\": \"2020-05-06\", \"cases\": 19 }];\n\n            var values = countyData.map(county => county.deaths); //get all the death data points\n\n            var colorScale = chroma\n                .scale(['black', 'red'])\n                .padding(0.15)\n                .domain(values, \"q\", 5);\n\n            function getColor(val) {\n                return colorScale(val).hex();\n            }\n\n            var colors = {};\n\n            countyData.forEach(function (county) {\n                var GEOID = county.fips;\n                var value = county.deaths;\n                var color = getColor(value);\n                if (!colors[color]) {\n                    colors[color] = [];\n                }\n                colors[color].push(GEOID);\n            });\n\n            var colorExpression = [\"match\", [\"get\", \"GEOID\"]];\n            var colorQuantiles = Object.entries(colors).forEach(function ([color, GEOIDs]) {\n                colorExpression.push(GEOIDs, color);\n            });\n\n            colorExpression.push(\"rgba(0,0,0,0)\");\n\n            map.addLayer({\n                id: \"counties\",\n                type: \"fill\",\n                minzoom: zoomThreshold,\n                source: {\n                    type: \"vector\",\n                    tiles: [\n                        \"https://gis-server.data.census.gov/arcgis/rest/services/Hosted/VT_2017_050_00_PY_D1/VectorTileServer/tile/{z}/{y}/{x}.pbf\"\n                    ]\n                },\n                \"source-layer\": \"County\",\n                paint: {\n                    \"fill-opacity\": 0.6,\n                    \"fill-color\": colorExpression\n                }\n            });\n\n        });\n    }\n    render() {\n        return (\n            <div>\n                  <div className=\"dark mask\"></div>\n                <div id=\"map\"></div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}